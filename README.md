# knowledge_robot

## 项目简介

本项目提供一个基于 Java 17 的 Windows 桌面程序（Swing），用于自动向中国电信内部知识问答接口提问。程序能够按照指定的时间间隔，围绕财务流程、IT 数据需求流程、装维作业等 10 个真实业务大类自动生成问题，并展示完整的请求与响应过程。

## 功能特性

- 支持配置调用间隔（默认 3 秒）以及每个对话的最小/最大轮次（默认 2-3 轮）。
- 内置 10 个可配置的问题大类，问题库保存在 `config/questions.json` 文件中，可按需修改。
- 自动生成带有业务背景的提问内容，模拟内部员工的真实咨询场景。
- 界面展示包含请求报文、流式响应片段和汇总回答在内的完整交互过程。
- 支持配置 `refs`、`agentlink`、接口地址以及授权 Token。
- 可在界面中选择是否忽略 SSL 证书校验（默认勾选），并支持导入本地证书文件加入信任链，便于在内部自签环境中调试。

## 开发与运行

### 环境要求

- JDK 17 及以上
- Maven 3.8 及以上

### 构建

```bash
mvn clean package
```

### 运行

```bash
mvn exec:java -Dexec.mainClass="com.knowledge.robot.ui.KnowledgeRobotApp"
```

> 运行在 Windows 上时，请确保网络能够访问接口地址，并根据需要修改授权信息。
> 如果目标接口使用自签名证书，可保持默认勾选的“忽略 SSL 证书校验（内部测试）”选项；若取消勾选，可通过“导入证书...”按钮加载服务器证书并加入信任链，界面会实时展示已加载的证书并在证书异常时给出处理建议。

## 配置问题库

`config/questions.json` 中定义了 10 个问题大类以及示例问题。每个大类均可在界面中勾选启用，也可以直接编辑该文件以新增或调整问题内容。

```json
{
  "categories": [
    {
      "name": "财务流程",
      "questions": [
        "财务共享中心的集中报销从提交申请到款项拨付的具体环节和时限是怎样安排的？"
      ]
    }
  ]
}
```

修改配置后，可在界面点击“重新加载问题配置”按钮即时生效。

## 证书处理

在内部环境如需校验服务器证书，可通过界面中的“导入证书...”按钮选择 `.cer`、`.crt` 或 `.pem` 文件。导入后会在配置区域列出证书主题及有效期，并自动加入请求的信任链。

- 若服务器证书为链式结构，请导入完整链条（根证书、子证书）以避免 `PKIX path building failed`。
- 可使用“清空证书”按钮快速移除已加载的证书并恢复为仅信任系统默认根证书。
- 如果仍遇到证书异常，可暂时勾选“忽略 SSL 证书校验（内部测试）”继续调试，并将详细日志反馈给证书管理员。
